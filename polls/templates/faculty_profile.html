{% extends 'header.html' %}
{% block page_scripts %}
<script>
  var modal = document.getElementById('myModal');
  var img = document.getElementById('profile');
  img.onclick = function(){
    modal.style.display = "block";
  }
  var span = document.getElementsByClassName("close")[0];
  span.onclick = function() {
    modal.style.display = "none";
  }
</script>
{% endblock %}

{% load comments %}
{% block content %}
    <div class='w3-card-4 w3-center w3-content w3-row w3-display-container' style="background-color: rgb(40,40,40);">
        <div class="w3-col m4 w3-padding-large">
            {% if profile.dp %}
            <img class='w3-img w3-hover-opacity' src='{{profile.dp.url}}'>
            {% else %}
            <img class='w3-img w3-hover-opacity' src = '{{MEDIA_URL}}/default.png' style="width:100%">
            {% endif %}
        </div>
        <div class="w3-col m8 w3-display-right">
            {{profile.name}}
            <br>
            {{profile.post}}
            <br><br>
            <label for = 'likes'>Likes:</label>
            {{profile.likes}}
            <br>
            <label for='rating'>Rating:    </label>
            {{profile.rating}}
            <br>
            <label for='campus'>Campus:    </label>
            {{profile.get_campus_display}}
            <br>
        </div>
    </div>
    <br>
    <div class = 'w3-card w3-content w3-center' style="background-color: rgb(40,40,40);">
        <br>
        {% if user.is_authenticated %}
        {% render_comment_form for profile %}
        {% else %}
        <p>Login to be able to comment.</p>
        {% endif %}
        <br>
    </div>
    {% get_comment_count for profile as comment_count  %}
        <br>
        <p class="w3-center">No. of comments: {{ comment_count }}</p>
       {% get_comment_list for profile as comlist %}
    <hr class="w3-content">
   {% for comment in comlist %}
        <div class = 'w3-card w3-hover-green w3-content w3-padding' style="background-color: rgb(35,35,35);">
            <p>{{comment.name}} says : </p>
           <p>{{comment.comment}}</p>
        </div>
        <br>
   {% endfor %}

{% endblock %}
